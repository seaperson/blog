---
layout: post
title:  "《微服务架构设计模式》- 服务的拆分策略"
date:   2022-12-15 14:51:03 +0800
categories: 微服务 架构 读书笔记
---

# 1、微服务架构是什么

## 软件架构的定义
![](https://raw.githubusercontent.com/seaperson/blog-pictures/main/202212151551035.png)



## 软件架构五（4+1）视图模型
![](https://raw.githubusercontent.com/seaperson/blog-pictures/main/202212151558482.png)
- 逻辑视图 ：开发人员创建的软件元素。在面向对象的语言中，这些元素是类和包。它
们之间的关系是类和包之间的关系 ，包括继承、关联和依赖。
- 实现视图： 构建编译系统的输出。此视图由表示打包代码的模块和组件组成，组件是由一个或多个模块组成的可执行或可部署单元。在Java 中，模块是JAR 文件，组件通常是 WAR 文件或可执行JAR 文件。它们之间的关系包括模块之间的依赖关系以及组件和模块之间的组合关系。
- 进程视图：运行时的组件。每个元素都是一个进程，进程之间的关系代表进程间通信。
- 部署视图：进程如何映射到机器。此视图中的元素由（物理或虚拟）计算机和进程组成。机器之间的关系代表网络。该视图还描述了进程和机器之间的关系。

> +1指的是场景，它负责把视图串联起来。每个场景负责描述在一个视图中的多个架构元素如何协作，以完成一个请求。例如在逻辑视图中的场景，展现了类是如何协作的。同样，在进程视图中的场景，展现了进程是如何协作。

也有另外的说法:
- 逻辑架构：功能设计、职责划分、协作关系
- 数据架构：数据模型、分布策略、存储格式
- 开发架构：技术选型、服务拆分、架构模型、代码工程
- 运行架构：业务流程、调用链路、高并发高性能高可用设计
- 物理架构：物理节点、资源拓扑、部署情况、网络结构


## 架构风格

### 分层式架构风格（逻辑视图）

#### 定义
>分层架构将软件元素按层的方式组织。每个层都有明确定义的职责。分层架构还限制了层之间的依赖关系。每层只能依赖于紧邻其下方的层(如果严格分层)或其下面的任何层。

#### 三层架构
- 表现层:包含实现用户界面或外部API的代码。
- 业务逻辑层:包含业务逻辑。
- 数据持久化层:实现与数据库交互的逻辑。

#### 弊端
- 单个表现层：它无法展现应用程序可能不仅仅由单个系统调用的事实。
- 单数据持久化层: 它无法展现应用程序可能与多个数据库 进行交互的事实。
- 将业务逻辑层定义为依赖千数据持久化层:理论上，这样的依赖性会妨碍你在没有数据库的情况下测试业务逻辑。
- 依赖关系与分层架构所描述相反。

### 六边形架构


